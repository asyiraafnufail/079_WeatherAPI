<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Info Cuaca</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f7;
      margin: 40px;
      color: #2c3e50;
    }
    h2 { text-align: center; color:#34495e; }
    #search-area { text-align:center; margin-bottom:20px; }
    input { padding:8px; width:220px; border:1px solid #ccc; border-radius:4px; }
    button { padding:8px 12px; margin-left:5px; background:#3498db; color:#fff; border:none; border-radius:4px; cursor:pointer; }
    button:hover { background:#2980b9; }
    #result { max-width:480px; margin:0 auto; background:#fff; border:1px solid #ddd; border-radius:5px; padding:15px 20px; }
    .row { margin:6px 0; display:flex; justify-content:space-between; }
    .label { color:#7f8c8d; }
    .value { font-weight:700; }
  </style>
</head>
<body>
  <h2>Info Cuaca</h2>
  <div id="search-area">
    <label for="city-input">Lokasi:</label>
    <input type="text" id="city-input" placeholder="Masukkan nama kota..." value="Yogyakarta">
    <button id="search-btn">Cari</button>
  </div>

  <div id="result">
    <p>Masukkan nama lokasi untuk melihat data cuaca.</p>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script>
    const API_KEY = "ffc1c5d59b344e5487a10849250610"; 
    const BASE_URL = "https://api.weatherapi.com/v1/current.json";

    function getWeather(city) {
      if (!city) {
        $("#result").html("<p style='color:red;'>Mohon masukkan nama kota.</p>");
        return;
      }

      $("#result").html("<p>Sedang memuat data...</p>");
      const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(city)}&aqi=no`;

      $.ajax({
        url: url,
        method: "GET",
        success: function(data) {
          const kecamatan = data.location.name || "-";
          const provinsi = data.location.region || "-";
          const negara = data.location.country || "-";
          const suhu = (data.current && data.current.temp_c !== undefined) ? data.current.temp_c : "-";
          const lon = data.location.lon;
          const lat = data.location.lat;

          $("#result").html(`
            <div class="row"><span class="label">Kecamatan:</span> <span class="value">${kecamatan}</span></div>
            <div class="row"><span class="label">Provinsi:</span> <span class="value">${provinsi}</span></div>
            <div class="row"><span class="label">Negara:</span> <span class="value">${negara}</span></div>
            <div class="row"><span class="label">Suhu:</span> <span class="value">${suhu}Â°C</span></div>
            <div class="row"><span class="label">Longitude:</span> <span class="value">${lon}</span></div>
            <div class="row"><span class="label">Latitude:</span> <span class="value">${lat}</span></div>
          `);
        },
        error: function(xhr) {
          let msg = "Gagal mengambil data. Pastikan nama kota benar dan API key valid.";
          if (xhr && xhr.responseJSON && xhr.responseJSON.error && xhr.responseJSON.error.message) {
            msg = `Error: ${xhr.responseJSON.error.message}`;
          }
          $("#result").html(`<p style='color:red;'>${msg}</p>`);
        }
      });
    }

    $("#search-btn").on("click", function() {
      const city = $("#city-input").val().trim();
      getWeather(city);
    });

    $("#city-input").on("keypress", function(e) {
      if (e.which === 13) {
        $("#search-btn").click();
      }
    });

    $(document).ready(function() {
      const defaultCity = $("#city-input").val().trim();
      if (defaultCity) getWeather(defaultCity);
    });
  </script>
</body>
</html>
